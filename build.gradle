group 'me.raatiniemi'
version '0.0.1'

apply plugin: 'java'
apply plugin: 'jacoco'
apply plugin: 'org.sonarqube'
apply plugin: 'com.github.johnrengelman.shadow'

// noinspection GroovyUnusedAssignment
sourceCompatibility = JavaVersion.VERSION_1_8

// noinspection GroovyUnusedAssignment
targetCompatibility = JavaVersion.VERSION_1_8

repositories {
    mavenCentral()
}

buildscript {
    repositories {
        jcenter()

        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }

    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.3'
        classpath 'org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.6'
    }
}

// noinspection GroovyAssignabilityCheck
jar {
    manifest {
        attributes(
                'Implementation-Title': 'jcmdr',
                'Implementation-Version': version
        )
    }
}

sonarqube {
    properties {
        properties['sonar.java.binaries'] = 'build/classes/main'
        properties['sonar.java.test.binaries'] = 'build/classes/test'

        properties['sonar.junit.reportPaths'] = 'build/test-results'
        properties['sonar.jacoco.reportPath'] = "${buildDir}/jacoco/test.exec"
    }
}

jacoco {
    toolVersion = "0.7.8"
}

dependencies {
    testCompile 'junit:junit:4.12'
}
